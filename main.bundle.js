!function(t,e){for(var a in e)t[a]=e[a]}(exports,function(t){var e={};function a(r){if(e[r])return e[r].exports;var u=e[r]={i:r,l:!1,exports:{}};return t[r].call(u.exports,u,u.exports,a),u.l=!0,u.exports}return a.m=t,a.c=e,a.d=function(t,e,r){a.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},a.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},a.t=function(t,e){if(1&e&&(t=a(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(a.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var u in t)a.d(r,u,function(e){return t[e]}.bind(null,u));return r},a.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return a.d(e,"a",e),e},a.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},a.p="",a(a.s=0)}([function(t,e,a){"use strict";a.r(e),a.d(e,"BaseFlowItem",(function(){return u})),a.d(e,"FlowContext",(function(){return n})),a.d(e,"PayloadWrapper",(function(){return r})),a.d(e,"FlowProcessor",(function(){return o}));class r{constructor(t,e){this._key=t,this._payload=e,this._defaultKey="DEFAULT_KEY"}get key(){return this._key}set key(t){this._key=t}getRawPayload(){return this._payload}set payload(t){this._payload=t}static wrapPayloadDefaultKey(t){return r.wrapPayload(this._defaultKey,t)}static wrapPayload(t,e){return new r(t,e)}}class u{constructor(){this._outputId=null,this._inputId=null}get inputId(){return this._inputId}set inputId(t){this._inputId=t}get outputId(){return this._outputId}set outputId(t){this._outputId=t}execute(t,e){let a=this.doExecute(t.getRawPayload(),e);return a instanceof r?(null!=this._outputId&&a.setKey(this._outputId),a):r.wrapPayload(null!=this._outputId?this._outputId:this.constructor.name,a)}doExecute(t,e){console.log("doExecute")}}class n{constructor(t){this._payloadMap=new Map,this._currentPayloadState=t,this._payloadMap.set(t.key,t)}addPayloadEntry(t){null!=t&&(this._payloadMap.set(t.key,t),this._currentPayloadState=t)}get currentPayloadState(){return this._currentPayloadState}getPayloadState(t){return this._payloadMap.get(t)}getRawPayloadState(t){return this.getPayloadState(t).getRawPayload()}getFlowInputParam(){return this.getRawPayloadState("FLOW_INPUT")}getGlobalFlowInputParam(){return this.getRawPayloadState("FLOW_INPUT")}getSuitablePayload(t){return null!=t?this.getPayloadState(t):this.currentPayloadState}}class o extends u{constructor(t){super(),this._itens=t}get itens(){return this._itens}set itens(t){this._itens=t}execute(t){let e=r.wrapPayload("FLOW_INPUT",t),a=new n(e);return super.execute(e,a).getRawPayload()}doExecute(t,e){if(Array.isArray(this._itens)&&0!==this._itens){this.executeItem(this._itens[0],r.wrapPayloadDefaultKey(t),e);for(let t=1;t<this._itens.length;t++){let a=this._itens[t],r=e.getSuitablePayload(a.inputId);this.executeItem(a,r,e)}return this.getSuitableFlowOutput(e)}return null}executeItem(t,e,a){let r=t.execute(e,a);this.addPayloadEntry(a,r)}addPayloadEntry(t,e){t.addPayloadEntry(e)}getSuitableFlowOutput(t){return null!=super.outputId?t.getPayloadState(super.outputId):t.currentPayloadState}}}]));
