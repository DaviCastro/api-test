!function(t,e){for(var r in e)t[r]=e[r]}(exports,function(t){var e={};function r(a){if(e[a])return e[a].exports;var n=e[a]={i:a,l:!1,exports:{}};return t[a].call(n.exports,n,n.exports,r),n.l=!0,n.exports}return r.m=t,r.c=e,r.d=function(t,e,a){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},r.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(r.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)r.d(a,n,function(e){return t[e]}.bind(null,n));return a},r.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="",r(r.s=0)}([function(t,e,r){"use strict";r.r(e),r.d(e,"BaseFlowItem",(function(){return n})),r.d(e,"FlowContext",(function(){return u})),r.d(e,"PayloadWrapper",(function(){return a})),r.d(e,"FlowProcessor",(function(){return o})),r.d(e,"FlowBuilder",(function(){return s}));class a{constructor(t,e){this._key=t,this._payload=e,this._defaultKey="DEFAULT_KEY"}get key(){return this._key}set key(t){this._key=t}getRawPayload(){return this._payload}set payload(t){this._payload=t}static wrapPayloadDefaultKey(t){return a.wrapPayload(this._defaultKey,t)}static wrapPayload(t,e){return new a(t,e)}}class n{constructor(){this._outputId=null,this._inputId=null}get inputId(){return this._inputId}set inputId(t){this._inputId=t}get outputId(){return this._outputId}set outputId(t){this._outputId=t}execute(t,e){let r=this.doExecute(t.getRawPayload(),e);return r instanceof a?(null!=this._outputId&&r.setKey(this._outputId),r):a.wrapPayload(null!=this._outputId?this._outputId:this.constructor.name,r)}doExecute(t,e){console.log("doExecute")}}class u{constructor(t){this._payloadMap=new Map,this._currentPayloadState=t,this._payloadMap.set(t.key,t)}addPayloadEntry(t){null!=t&&(this._payloadMap.set(t.key,t),this._currentPayloadState=t)}get currentPayloadState(){return this._currentPayloadState}getPayloadState(t){return this._payloadMap.get(t)}getRawPayloadState(t){return this.getPayloadState(t).getRawPayload()}getFlowInputParam(){return this.getRawPayloadState("FLOW_INPUT")}getGlobalFlowInputParam(){return this.getRawPayloadState("FLOW_INPUT")}getSuitablePayload(t){return null!=t?this.getPayloadState(t):this.currentPayloadState}}class o extends n{constructor(t){super(),this._itens=t}get itens(){return this._itens}set itens(t){this._itens=t}execute(t){let e=a.wrapPayload("FLOW_INPUT",t),r=new u(e);return super.execute(e,r).getRawPayload()}doExecute(t,e){if(Array.isArray(this._itens)&&0!==this._itens){this.executeItem(this._itens[0],a.wrapPayloadDefaultKey(t),e);for(let t=1;t<this._itens.length;t++){let r=this._itens[t],a=e.getSuitablePayload(r.inputId);this.executeItem(r,a,e)}return this.getSuitableFlowOutput(e)}return null}executeItem(t,e,r){let a=t.execute(e,r);this.addPayloadEntry(r,a)}addPayloadEntry(t,e){t.addPayloadEntry(e)}getSuitableFlowOutput(t){return null!=super.outputId?t.getPayloadState(super.outputId):t.currentPayloadState}}class s{constructor(){this.steps=new Array}addStep(t){if(!t instanceof n)throw new Error("Not a FlowItem");this.steps.push(t)}build(){if(!("steps"in this))throw new Error("Steps missing");return new o(this.steps)}}}]));
